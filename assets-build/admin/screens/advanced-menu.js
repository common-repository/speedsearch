!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.speedsearch_querySelector(".speedsearch-submit");e&&e.addEventListener("click",(e=>{e.preventDefault();const t=new FormData(document.speedsearch_querySelector(".speedsearch-form"));let n={action:"speedsearch_save",nonceToken:speedsearch.nonceToken,attributesURLParamsPrefix:t.get("attributes-url-params-prefix"),cacheFlushInterval:t.get("cache-flush-interval"),whenNoImageAltUseProductTitle:t.get("when-no-image-alt-use-product-title"),doNotUseWebhooks:t.get("do-not-use-webhooks"),analyticsAgeing:t.get("enable-analytics-ageing"),analyticsAgeingHalfLife:t.get("analytics-ageing-half-life"),fancyUrls:t.get("setting-fancy-urls"),prefixBeforeFancyUrls:t.get("setting-prefix-before-fancy-urls"),deubgMode:t.get("setting-debug-mode"),debugModeProducts:JSON.stringify([t.get("debug-mode-selected-products[1]"),t.get("debug-mode-selected-products[2]"),t.get("debug-mode-selected-products[3]"),t.get("debug-mode-selected-products[4]"),t.get("debug-mode-selected-products[5]")]),doNotWaitForSyncToFinish:t.get("do-not-wait-for-sync-to-finish")},o={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:new URLSearchParams(n)};fetch(ajaxurl,o).then((e=>e.json())).then((e=>{location.reload()}))}));const t=document.speedsearch_querySelector(".speedsearch-cache-flush");t&&t.addEventListener("click",(e=>{let t=new URLSearchParams({action:"speedsearch_cache_flush",nonceToken:speedsearch.nonceToken}),n={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:t};fetch(ajaxurl,n).then((e=>e.json())).then((e=>{location.reload()}))}),{passive:!0});const n=document.speedsearch_querySelector(".speedsearch-products-object-cache-flush");n&&n.addEventListener("click",(e=>{let t=new URLSearchParams({action:"speedsearch_products_object_cache_flush",nonceToken:speedsearch.nonceToken}),n={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:t};fetch(ajaxurl,n).then((e=>e.json())).then((e=>{location.reload()}))}),{passive:!0}),document.speedsearch_querySelector(".speedsearch-pause-sync").addEventListener("click",(e=>{const t=Number(document.speedsearch_querySelector('[name="pause-sync-for"]').value);if(!t)return Swal.fire({title:speedsearch.txt.pauseSyncValueShouldBeGreaterThan0,icon:"error",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"});if(t>5)return Swal.fire({title:speedsearch.txt.pauseSyncValueCantBeGreaterThan5,icon:"error",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"});let n=new URLSearchParams({action:"speedsearch_pause_sync",nonceToken:speedsearch.nonceToken,pauseFor:t}),o={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:n};fetch(ajaxurl,o).then((e=>e.json())).then((e=>{!0===e.success?Swal.fire({title:speedsearch.txt.syncWasPaused,icon:"success",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"}):Swal.fire({title:speedsearch.txt.cantPauseSync,text:e.errorMsg,icon:"error",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"})}))}),{passive:!0}),speedsearch.resetToFreshState=function(){let e=new URLSearchParams({action:"speedsearch_reset_to_fresh_state",nonceToken:speedsearch.nonceToken}),t={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:e};sessionStorage.removeItem("speedsearch-introduction-completed"),fetch(ajaxurl,t).then((e=>(alert("Reset is done. Please keep in mind that after you enter license key, you should be redirected to shop Authorization page."),e.json()))).then((e=>{location.reload()}))},speedsearch.resetFeedData=function(){let e=new URLSearchParams({action:"speedsearch_reset_feed",nonceToken:speedsearch.nonceToken}),t={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:e};fetch(ajaxurl,t).then((e=>e.json())).then((e=>{!0===e.success&&Swal.fire({title:speedsearch.txt.feedRegenerationProcessHasStarted,icon:"success",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"})}))},function(){const e=document.body.speedsearch_querySelectorAll("select[name^='debug-mode-selected-products']");for(const t of e)t.addEventListener("change",(function(){let t=!0;for(const n of e){let e=!1,o=n.nextElementSibling;for(;o;){if(o.value){e=!0;break}o=o.nextElementSibling}n.value||t||e?n.classList.remove("speedsearch-hidden"):n.classList.add("speedsearch-hidden"),n.value||(t=!1)}}),{passive:!0});const t=new CustomEvent("change");e[e.length-1].dispatchEvent(t)}(),document.speedsearch_querySelector(".wp-plugins-core-tabs-container").classList.add("show"),document.speedsearch_querySelector(".speedsearch-container.speedsearch-general-settings").classList.add("show");let o=document.speedsearch_querySelector(".speedsearch-force-sync-link");o&&o.addEventListener("click",(()=>{Swal.fire({title:speedsearch.txt.forceSyncNoticePart1,text:speedsearch.txt.forceSyncNoticePart2,icon:"warning",showCancelButton:!0,confirmButtonColor:"#2271b1",cancelButtonColor:"#d33",confirmButtonText:speedsearch.txt.yesForceSync+"!",cancelButtonText:speedsearch.txt.no}).then((e=>{if(e.isConfirmed){let e=new URLSearchParams({action:"speedsearch_force_sync",nonceToken:speedsearch.nonceToken}),t={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:e};fetch(ajaxurl,t).then((e=>e.json())).then((e=>{!0===e.success?Swal.fire({title:speedsearch.txt.forceSyncFinished,icon:"success",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"}):Swal.fire({title:speedsearch.txt.forceSyncFailed,text:e.errorMsg,icon:"error",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"})}))}}))}),{passive:!0});let s=document.speedsearch_querySelector(".speedsearch-remove-all-products-hash-link");s&&s.addEventListener("click",(()=>{Swal.fire({title:speedsearch.txt.removeAllProductsHash1,text:speedsearch.txt.removeAllProductsHash2,icon:"warning",showCancelButton:!0,confirmButtonColor:"#2271b1",cancelButtonColor:"#d33",confirmButtonText:speedsearch.txt.yesInitiateProductsHashRegeneration+"!",cancelButtonText:speedsearch.txt.no}).then((e=>{if(e.isConfirmed){let e=new URLSearchParams({action:"speedsearch_remove_all_products_hash",nonceToken:speedsearch.nonceToken}),t={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:e};fetch(ajaxurl,t).then((e=>e.json())).then((e=>{Swal.fire({title:speedsearch.txt.allProductsHashGenerationProcessStarted,icon:"success",confirmButtonColor:"#2271b1",cancelButtonColor:"#d33"})}))}}))}),{passive:!0});let c=document.speedsearch_querySelector(".speedsearch-reset-feed-link");c&&c.addEventListener("click",(()=>{Swal.fire({title:speedsearch.txt.resetFeed1,text:speedsearch.txt.resetFeed2,icon:"warning",showCancelButton:!0,confirmButtonColor:"#2271b1",cancelButtonColor:"#d33",confirmButtonText:speedsearch.txt.yes,cancelButtonText:speedsearch.txt.no}).then((e=>{e.isConfirmed&&speedsearch.resetFeedData()}))}),{passive:!0});let r=document.speedsearch_querySelector(".speedsearch-show-debug-data-link");r&&r.addEventListener("click",(()=>{let e=new URLSearchParams({action:"speedsearch_get_debug_data",nonceToken:speedsearch.nonceToken}),t={method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:e};fetch(ajaxurl,t).then((e=>e.json())).then((e=>{Swal.fire({title:"",html:e.html,icon:"info",customClass:{container:"speedsearch-debug-popup"}})}))}),{passive:!0});let a=document.speedsearch_querySelector(".speedsearch-export-feed-buffer-table-link");a&&a.addEventListener("click",(()=>{window.location.href=`${window.location.href}&nonce=${speedsearch.nonceToken}&speedsearch-action=export-feed-buffer-table`}),{passive:!0})}),{passive:!0})}();